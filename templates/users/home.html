{% extends "base/base.html" %}

{% block title %}Главная - Кадровая служба королевства{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">
                    Добро пожаловать в кадровую службу королевства!
                </h1>
                <p class="lead mb-4">
                    Система поиска и учета подданных в различных королевствах, их отбор через вступительные испытания 
                    и оповещение о результатах для последующего зачисления в подданные королей.
                </p>
                {% if not user.is_authenticated %}
                    <div class="d-flex gap-3">
                        <a href="{% url 'users:register' %}" class="btn btn-light btn-lg">
                            <i class="bi bi-person-plus me-2"></i>Регистрация
                        </a>
                        <a href="{% url 'users:login' %}" class="btn btn-outline-light btn-lg">
                            <i class="bi bi-box-arrow-in-right me-2"></i>Вход
                        </a>
                    </div>
                {% endif %}
            </div>
            <div class="col-lg-6 text-center">
                <i class="bi bi-crown-fill" style="font-size: 15rem; opacity: 0.3;"></i>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="fw-bold">Возможности системы</h2>
                <p class="text-muted">Все необходимое для управления королевством и подданными</p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <i class="bi bi-person-check-fill text-primary" style="font-size: 3rem;"></i>
                        <h5 class="card-title mt-3">Регистрация и роли</h5>
                        <p class="card-text">
                            Регистрация с выбором роли "Король" или "Подданный" и привязкой к королевству.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <i class="bi bi-clipboard-check-fill text-success" style="font-size: 3rem;"></i>
                        <h5 class="card-title mt-3">Тестовые испытания</h5>
                        <p class="card-text">
                            Прохождение тестовых испытаний с вопросами True/False для отбора подданных.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card h-100 text-center">
                    <div class="card-body">
                        <i class="bi bi-graph-up-arrow text-warning" style="font-size: 3rem;"></i>
                        <h5 class="card-title mt-3">Управление и отчеты</h5>
                        <p class="card-text">
                            Зачисление подданных королями, логирование действий и экспорт данных в Excel.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Login/Register Forms -->
{% if not user.is_authenticated %}
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h4 class="mb-0">
                            <i class="bi bi-box-arrow-in-right me-2"></i>Вход в систему
                        </h4>
                    </div>
                    <div class="card-body">
                        <form method="post" action="{% url 'users:login' %}">
                            {% csrf_token %}
                            <div class="mb-3">
                                <label for="{{ login_form.email.id_for_label }}" class="form-label">Email</label>
                                {{ login_form.email }}
                            </div>
                            <div class="mb-3">
                                <label for="{{ login_form.password.id_for_label }}" class="form-label">Пароль</label>
                                {{ login_form.password }}
                            </div>
                            <div class="mb-3 form-check">
                                {{ login_form.remember_me }}
                                <label class="form-check-label" for="{{ login_form.remember_me.id_for_label }}">
                                    Запомнить меня
                                </label>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">
                                <i class="bi bi-box-arrow-in-right me-2"></i>Войти
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h4 class="mb-0">
                            <i class="bi bi-person-plus me-2"></i>Регистрация
                        </h4>
                    </div>
                    <div class="card-body">
                        <form method="post" action="{% url 'users:register' %}">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="{{ registration_form.first_name.id_for_label }}" class="form-label">Имя</label>
                                    {{ registration_form.first_name }}
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="{{ registration_form.last_name.id_for_label }}" class="form-label">Фамилия</label>
                                    {{ registration_form.last_name }}
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="{{ registration_form.email.id_for_label }}" class="form-label">Email</label>
                                {{ registration_form.email }}
                            </div>
                            <div class="mb-3">
                                <label for="{{ registration_form.role.id_for_label }}" class="form-label">Роль</label>
                                {{ registration_form.role }}
                            </div>
                            <div class="mb-3">
                                <label for="kingdom" class="form-label">Королевство</label>
                                <select name="kingdom" id="kingdom" class="form-control" required>
                                    <option value="">Выберите королевство</option>
                                    {% for kingdom in kingdoms %}
                                        <option value="{{ kingdom.id }}">{{ kingdom.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="{{ registration_form.password1.id_for_label }}" class="form-label">Пароль</label>
                                {{ registration_form.password1 }}
                            </div>
                            <div class="mb-3">
                                <label for="{{ registration_form.password2.id_for_label }}" class="form-label">Подтверждение пароля</label>
                                {{ registration_form.password2 }}
                            </div>
                            <button type="submit" class="btn btn-primary w-100">
                                <i class="bi bi-person-plus me-2"></i>Зарегистрироваться
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- API Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="fw-bold">API Документация</h2>
                <p class="text-muted">Полная документация REST API для интеграции с внешними системами</p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="bi bi-book text-primary" style="font-size: 3rem;"></i>
                        <h5 class="card-title mt-3">Swagger UI</h5>
                        <p class="card-text">
                            Интерактивная документация API с возможностью тестирования эндпоинтов.
                        </p>
                        <a href="/api/docs/" class="btn btn-primary">
                            <i class="bi bi-arrow-right me-2"></i>Открыть Swagger
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="bi bi-file-text text-success" style="font-size: 3rem;"></i>
                        <h5 class="card-title mt-3">ReDoc</h5>
                        <p class="card-text">
                            Альтернативная документация API с удобным интерфейсом для чтения.
                        </p>
                        <a href="/api/redoc/" class="btn btn-success">
                            <i class="bi bi-arrow-right me-2"></i>Открыть ReDoc
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
